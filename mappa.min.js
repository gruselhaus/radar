!function webpackUniversalModuleDefinition(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.Mappa=factory():root.Mappa=factory()}(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/dist/",__webpack_require__(__webpack_require__.s=6)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_parseGeoJSON,_parseGeoJSON2=_interopRequireDefault(__webpack_require__(3));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var StaticMap=function(){function StaticMap(options){_classCallCheck(this,StaticMap),this.options=options,this.init()}return _createClass(StaticMap,[{key:"init",value:function init(){this.options.pixels=256,this.options.scale||(this.options.scale=1),2===this.options.scale&&(this.options.pixels=512)}},{key:"latLngToPixel",value:function latLngToPixel(lat,lng){return{x:this.fromLngToPoint(lng)-this.fromLngToPoint(this.options.lng)+this.options.width/(2/this.options.scale),y:this.fromLatToPoint(lat)-this.fromLatToPoint(this.options.lat)+this.options.height/(2/this.options.scale)}}},{key:"fromLatToPoint",value:function fromLatToPoint(l){return this.options.pixels/Math.PI*Math.pow(2,this.options.zoom)*(Math.PI-Math.log(Math.tan(Math.PI/4+l*Math.PI/180/2)))}},{key:"fromLngToPoint",value:function fromLngToPoint(l){return this.options.pixels/Math.PI*Math.pow(2,this.options.zoom)*(l*Math.PI/180+Math.PI)}}],[{key:"geoJSON",value:function geoJSON(){return(0,_parseGeoJSON2.default)(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}]),StaticMap}();exports.default=StaticMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_parseGeoJSON,_parseGeoJSON2=_interopRequireDefault(__webpack_require__(3)),_GUID,_GUID2=_interopRequireDefault(__webpack_require__(13));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TileMap=function(){function TileMap(options){_classCallCheck(this,TileMap),this.options=options,this.mappaDiv=null,this.id=(0,_GUID2.default)(),this.srcLoaded=!1}return _createClass(TileMap,[{key:"loadSrc",value:function loadSrc(){var _this=this,scriptPromise;new Promise(function(resolve,reject){if(_this.scriptTag=document.createElement("script"),document.body.appendChild(_this.scriptTag),_this.scriptTag.id=_this.options.provider,_this.scriptTag.onload=resolve,_this.scriptTag.onerror=reject,_this.scriptTag.async=!0,_this.scriptTag.src=_this.scriptSrc,_this.styleSrc){var styleTag=document.createElement("link");document.head.appendChild(styleTag),styleTag.rel="stylesheet",styleTag.href=_this.styleSrc}}).then(function(){_this.srcLoaded=!0})}},{key:"overlay",value:function overlay(canvas,callback){var _this2=this;void 0!==canvas.elt?this.canvas=canvas.elt:this.canvas=canvas,this.scriptTag.onload=function(){_this2.mappaDiv=document.createElement("div"),_this2.canvas.parentElement?_this2.canvas.parentElement.appendChild(_this2.mappaDiv):document.body.appendChild(_this2.mappaDiv),_this2.mappaDiv.setAttribute("style","width:"+canvas.width+"px;height:"+canvas.height+"px;"),_this2.mappaDiv.setAttribute("id",_this2.id),_this2.createMap(),"function"==typeof callback&&callback()}}},{key:"latLngToPixel",value:function latLngToPixel(){for(var pos=void 0,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return pos="object"===_typeof(args[0])?args[0]:{lat:Number(args[0]),lng:Number(args[1])},this.fromLatLngToPixel(pos)}},{key:"pixelToLatLng",value:function pixelToLatLng(){return this.fromPointToLatLng.apply(this,arguments)}},{key:"zoom",value:function zoom(){return Math.floor(this.getZoom())}},{key:"geoJSON",value:function geoJSON(){return(0,_parseGeoJSON2.default)(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}]),TileMap}();exports.default=TileMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_TileMap2,_TileMap3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Leaflet=function(_TileMap){function Leaflet(options){_classCallCheck(this,Leaflet);var _this=_possibleConstructorReturn(this,(Leaflet.__proto__||Object.getPrototypeOf(Leaflet)).call(this,options));return _this.scriptSrc="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js",_this.styleSrc="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css",_this.ready=!1,"Leaflet"===_this.constructor.name&&_this.loadSrc(),_this}return _inherits(Leaflet,_TileMap),_createClass(Leaflet,[{key:"createMap",value:function createMap(){var _this2=this;this.map=L.map(this.id,{center:[this.options.lat,this.options.lng],zoom:this.options.zoom,inertia:!1}),this.options.style?(this.tiles=L.tileLayer(this.options.style).addTo(this.map),this.tiles.on("tileload",function(){_this2.ready=!0})):(Leaflet.messages().tiles(),this.ready=!0),this.canvasOverlay()}},{key:"canvasOverlay",value:function canvasOverlay(){var _this3=this;this.tiles&&(this.tiles.options.opacity=this.options.opacity),L.overlay=L.Layer.extend({onAdd:function onAdd(){var overlayPane=overlay.getPane(),container=L.DomUtil.create("div","leaflet-layer");container.appendChild(_this3.canvas),overlayPane.appendChild(container)},drawLayer:function drawLayer(){}});var overlay=new L.overlay;this.map.addLayer(overlay);var cnvs=this.canvas.getContext("webgl")||this.canvas.getContext("2d");this.map.on("move",function(){var d=_this3.map.dragging._draggable;d._newPos&&(cnvs.canvas.style.transform="translate("+-d._newPos.x+"px, "+-d._newPos.y+"px)")})}},{key:"fromLatLngToPixel",value:function fromLatLngToPixel(position){if(this.ready){var containerPoint=this.map.latLngToContainerPoint(position);return{x:containerPoint.x,y:containerPoint.y}}return{x:-100,y:-100}}},{key:"fromPointToLatLng",value:function fromPointToLatLng(){if(this.ready){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.map.containerPointToLatLng(args)}return{lat:-100,lng:-100}}},{key:"getZoom",value:function getZoom(){return this.ready?this.map.getZoom():0}},{key:"onChange",value:function onChange(callback){var _this4=this;this.ready?(callback(),this.map.on("move",callback)):setTimeout(function(){_this4.onChange(callback)},200)}},{key:"removeOnChange",value:function removeOnChange(callback){this.map.on("move",callback)}}],[{key:"messages",value:function messages(){return{tiles:function tiles(){console.warn("You are not using any tiles for your map. Try with: http://{s}.tile.osm.org/{z}/{x}/{y}.png")}}}}]),Leaflet}(_interopRequireDefault(__webpack_require__(1)).default);exports.default=Leaflet},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var eachFeature=function eachFeature(feature,type){return feature.hasOwnProperty("geometry")&&feature.geometry.type===type?feature.geometry.coordinates:feature.hasOwnProperty("geometries")&&feature.geometries instanceof Array&&feature.geometry.type===type?void feature.geometries.forEach(function(geometry){return feature.geometry.coordinates}):feature.hasOwnProperty("coordinates")&&feature.geometry.type===type?feature.geometry.coordinates:null},parseGeoJSON=function parseGeoJSON(data,type){var result=[];return"FeatureCollection"===data.type?data.features instanceof Array&&data.features.forEach(function(feature){var f=eachFeature(feature,type);null!=f&&result.push(f)}):result=eachFeature(data,type),result};exports.default=parseGeoJSON},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticMap=exports.Mapquest=exports.Google=exports.Mapbox=void 0;var _Mapbox,_Mapbox2=_interopRequireDefault(__webpack_require__(8)),_Google,_Google2=_interopRequireDefault(__webpack_require__(7)),_Mapquest,_Mapquest2=_interopRequireDefault(__webpack_require__(9)),_StaticMap,_StaticMap2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.Mapbox=_Mapbox2.default,exports.Google=_Google2.default,exports.Mapquest=_Mapquest2.default,exports.StaticMap=_StaticMap2.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mapbox=exports.Leaflet=exports.Google=exports.MapboxGL=void 0;var _MapboxGL,_MapboxGL2=_interopRequireDefault(__webpack_require__(12)),_Google,_Google2=_interopRequireDefault(__webpack_require__(10)),_Leaflet,_Leaflet2=_interopRequireDefault(__webpack_require__(2)),_Mapbox,_Mapbox2=_interopRequireDefault(__webpack_require__(11));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.MapboxGL=_MapboxGL2.default,exports.Google=_Google2.default,exports.Leaflet=_Leaflet2.default,exports.Mapbox=_Mapbox2.default},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_tileMap2,_tileMap=_interopRequireWildcard(__webpack_require__(5)),_staticMap2,_staticMap=_interopRequireWildcard(__webpack_require__(4));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Mappa=function(){function Mappa(provider,key){_classCallCheck(this,Mappa),this.provider=provider,this.key=key}return _createClass(Mappa,[{key:"staticMap",value:function staticMap(){for(var options={},_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if("object"===_typeof(args[0]))options=Object.assign({},args[0]);else{var opts=_staticMap[this.provider].options().userInput;args.forEach(function(el,i){var option=opts[i];options[option]=el})}return options.key=this.key,void 0===this.provider&&(this.provider="StaticMap"),new _staticMap[this.provider](options)}},{key:"tileMap",value:function tileMap(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];var options={};return"object"===_typeof(args[0])?options=Object.assign({},args[0]):["lat","lng","zoom"].forEach(function(el,i){options[el]=args[i]}),options.key=this.key,options.provider=this.provider,new _tileMap[this.provider](options)}}]),Mappa}();console.log("Mappa loaded!"),module.exports=Mappa},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_StaticMap2,_StaticMap3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Google=function(_StaticMap){function Google(options){_classCallCheck(this,Google);var _this=_possibleConstructorReturn(this,(Google.__proto__||Object.getPrototypeOf(Google)).call(this,options));return _this.imgUrl="https://maps.googleapis.com/maps/api/staticmap?",_this.createImage(),_this}return _inherits(Google,_StaticMap),_createClass(Google,[{key:"init",value:function init(){1===this.options.scale||void 0===this.options.scale?(this.options.pixels=128,this.options.scale=1):2===this.options.scale&&(this.options.pixels=256),this.options.width>640&&(Google.messages().size("width",this.options.width),this.options.width=640),this.options.height>640&&(Google.messages().size("height",this.options.height),this.options.height=640)}},{key:"createImage",value:function createImage(){var _this2=this;return this.options.key||(delete this.options.key,Google.messages().key()),this.options.center||(this.options.center=this.options.lat+","+this.options.lng),this.options.scale||(this.options.scale=1),this.options.size=this.options.width+"x"+this.options.height,Object.keys(this.options).forEach(function(option){Google.options().valid.indexOf(option)>-1&&(_this2.imgUrl+="&"+option+"="+_this2.options[option])}),this.imgUrl}}],[{key:"options",value:function options(){return{valid:["center","zoom","size","scale","format","maptype","language","region","markers","path","visible","style","signature","key","signature"],userInput:["lat","lng","zoom","width","height","scale","format","maptype","language","region","markers","path","visible","style","key","signature","center"]}}},{key:"messages",value:function messages(){return{size:function size(s,m){console.warn("You requested an image with a "+s+" of "+m+"px. Google Maps Static API max "+s+" value is 640px. For larger images, change the scale to 2 and keep the "+s+" between 1-640px. i.e: if you want an image 800x800px, set the width and height to 400x400 and the scale to 2.")},key:function key(){console.warn("For better results please provide an API key for your Google Maps Static API.")}}}}]),Google}(_interopRequireDefault(__webpack_require__(0)).default);exports.default=Google},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_StaticMap2,_StaticMap3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Mapbox=function(_StaticMap){function Mapbox(options){_classCallCheck(this,Mapbox);var _this=_possibleConstructorReturn(this,(Mapbox.__proto__||Object.getPrototypeOf(Mapbox)).call(this,options));return _this.imgUrl="https://api.mapbox.com/styles/v1/",_this.createImage(),_this}return _inherits(Mapbox,_StaticMap),_createClass(Mapbox,[{key:"init",value:function init(){this.options.pixels=256,this.options.scale||(this.options.scale=1),2===this.options.scale?this.options.pixels=512:(this.options.width>1280&&(Mapbox.messages().size("width",this.options.width),this.options.width=1280),this.options.height>1280&&(Mapbox.messages().size("height",this.options.width),this.options.height=1280))}},{key:"createImage",value:function createImage(){var _this2=this;return this.options.key?(void 0!==this.options.username?this.imgUrl+=this.options.username+"/":this.imgUrl+="mapbox/",void 0!==this.options.style?this.imgUrl+=this.options.style+"/":this.imgUrl+="streets-v10/",this.imgUrl+="static/",void 0!==this.options.overlay&&(this.imgUrl+=this.options.overlay+"/"),this.imgUrl+=this.options.lng+","+this.options.lat+",",!1===this.options.auto||void 0===this.options.auto?["zoom","bearing","pitch"].forEach(function(e,i){void 0!==_this2.options[e]?_this2.imgUrl+=_this2.options[e]:_this2.imgUrl+=0,i<2&&(_this2.imgUrl+=",")}):this.imgUrl+="auto",this.imgUrl+="/"+this.options.width+"x"+this.options.height,2===this.options.scale&&(this.imgUrl+="@2x"),this.imgUrl+="?access_token="+this.options.key,this.options.attribution?this.imgUrl+="&attribution="+this.options.attribution:this.imgUrl+="&attribution=false",this.options.logo?this.imgUrl+="&logo="+this.options.logo:this.imgUrl+="&logo=false",this.options.before_layer?this.imgUrl+="&before_layer="+this.options.before_layer:this.imgUrl+="&before_layer=false",this.imgUrl):(Mapbox.messages().key(),null)}}],[{key:"options",value:function options(){return{valid:["lat","lng","zoom","width","height","scale","bearing","pitch","style","username","overlay","attribution","logo","before_layer","center","size"],userInput:["lat","lng","zoom","width","height","scale","bearing","pitch","style","username","overlay","attribution","logo","before_layer","center","size"]}}},{key:"messages",value:function messages(){return{size:function size(s,m){return console.warn("You requested an image with a "+s+" of "+m+"px. Mapbox Static API max "+s+" value is 1280px. If you want a large image change the scale to 2.")},key:function key(){console.error("Mapbox Static API needs a key to work. To get a key visit: https://www.mapbox.com/api-documentation/#static")}}}}]),Mapbox}(_interopRequireDefault(__webpack_require__(0)).default);exports.default=Mapbox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_StaticMap2,_StaticMap3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Mapquest=function(_StaticMap){function Mapquest(options){_classCallCheck(this,Mapquest);var _this=_possibleConstructorReturn(this,(Mapquest.__proto__||Object.getPrototypeOf(Mapquest)).call(this,options));return _this.imgUrl="https://www.mapquestapi.com/staticmap/v5/map?",_this.createImage(),_this}return _inherits(Mapquest,_StaticMap),_createClass(Mapquest,[{key:"init",value:function init(){1===this.options.scale||void 0===this.options.scale?(this.options.pixels=128,this.options.scale=1):2===this.options.scale&&(this.options.pixels=256),this.options.width>1920&&(Mapquest.messages().size("width",this.options.width),this.options.width=1920),this.options.height>1920&&(Mapquest.messages().size("height",this.options.height),this.options.height=1920)}},{key:"createImage",value:function createImage(){var _this2=this;return this.options.key?(this.options.size=this.options.width+","+this.options.height,2===this.options.scale&&(this.options.size+="@2x"),this.options.center||(this.options.center=this.options.lat+","+this.options.lng),Object.keys(this.options).forEach(function(opt){Mapquest.options().valid.indexOf(opt)>-1&&(_this2.imgUrl+="&"+opt+"="+_this2.options[opt])}),this.imgUrl):(Mapquest.messages().key(),null)}}],[{key:"options",value:function options(){return{valid:["key","size","zoom","center","boundingBox","margin","format","type","scalebar","locations","declutter","defaultMarker","banner","traffic","key"],userInput:["lat","lng","zoom","width","height","scale","boundingBox","margin","format","type","scalebar","locations","declutter","defaultMarker","banner","traffic","key"]}}},{key:"messages",value:function messages(){return{size:function size(s,m){console.warn("You requested an image with a "+s+" of "+m+"px. Mapquest Static API max "+s+" value is 1920px. For larger images, change the scale to 2 and keep the "+s+" between 170x30px. i.e: if you want an 3840x3840px image, set the width and height to 1920x1920 and the scale to 2.")},key:function key(){console.warn("Please provide and API key to work with Mapquest Static API. Get one here: https://developer.mapquest.com/documentation/")}}}}]),Mapquest}(_interopRequireDefault(__webpack_require__(0)).default);exports.default=Mapquest},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_TileMap2,_TileMap3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Google=function(_TileMap){function Google(options){_classCallCheck(this,Google);var _this=_possibleConstructorReturn(this,(Google.__proto__||Object.getPrototypeOf(Google)).call(this,options));return _this.scriptSrc="https://maps.googleapis.com/maps/api/js?v=3",_this.options.key&&(_this.scriptSrc+="&key="+_this.options.key),_this.options.language&&(_this.scriptSrc+="&language="+_this.options.language),_this.options.region&&(_this.scriptSrc+="&region="+_this.options.region),_this.onChangeMethods={},_this.loadSrc(),_this}return _inherits(Google,_TileMap),_createClass(Google,[{key:"createMap",value:function createMap(){var _this2=this;this.options.key||Google.messages().key(),this.map=new google.maps.Map(document.getElementById(this.id),{center:{lat:this.options.lat,lng:this.options.lng},zoom:this.options.zoom||6,mapTypeId:this.options.maptype||"terrain",styles:this.options.styles||"",minZoom:1});var overlay=new google.maps.OverlayView;overlay.onAdd=function(){overlay.getPanes().overlayLayer.appendChild(_this2.canvas)},overlay.draw=function(){},overlay.setMap(this.map),google.maps.event.addListener(this.map,"bounds_changed",function(){var center=overlay.getProjection().fromLatLngToDivPixel(_this2.map.getCenter()),pixels=2;window.devicePixelRatio>=2&&(pixels=4);var offsetX=-Math.round(_this2.canvas.width/pixels-center.x),offsetY=-Math.round(_this2.canvas.height/pixels-center.y),cvs;(_this2.canvas.getContext("webgl")||_this2.canvas.getContext("2d")).canvas.style.transform="translate("+offsetX+"px,"+offsetY+"px)"}),google.maps.event.addListenerOnce(this.map,"tilesloaded",function(){_this2.ready=!0})}},{key:"fromLatLngToPixel",value:function fromLatLngToPixel(inputPos){if(this.ready){var position=new google.maps.LatLng(inputPos),topRight=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getNorthEast()),bottomLeft=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getSouthWest()),scale=Math.pow(2,this.map.getZoom()),point=this.map.getProjection().fromLatLngToPoint(position);return new google.maps.Point((point.x-bottomLeft.x)*scale,(point.y-topRight.y)*scale)}return{x:-100,y:-100}}},{key:"fromPointToLatLng",value:function fromPointToLatLng(){if(this.ready){var topRight=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getNorthEast()),bottomLeft=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getSouthWest()),scale=Math.pow(2,this.map.getZoom()),point=new google.maps.Point((arguments.length<=0?void 0:arguments[0])/scale+bottomLeft.x,(arguments.length<=1?void 0:arguments[1])/scale+topRight.y),latlng=this.map.getProjection().fromPointToLatLng(point);return{lat:latlng.lat(),lng:latlng.lng()}}return{lat:-100,lng:-100}}},{key:"getZoom",value:function getZoom(){return this.ready?this.map.getZoom():0}},{key:"onChange",value:function onChange(callback){var _this3=this;this.ready?(callback(),this.onChangeMethods[callback]=google.maps.event.addListener(this.map,"bounds_changed",callback)):setTimeout(function(){_this3.onChange(callback)},200)}},{key:"removeOnChange",value:function removeOnChange(callback){google.maps.event.removeListener(this.onChangeMethods[callback])}}],[{key:"messages",value:function messages(){return{key:function key(){console.warn("Please provide a Goolge Maps API Key. Get one here: https://developers.google.com/maps/documentation/javascript/ ")}}}}]),Google}(_interopRequireDefault(__webpack_require__(1)).default);exports.default=Google},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Leaflet2,_Leaflet3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Mapbox=function(_Leaflet){function Mapbox(options){_classCallCheck(this,Mapbox);var _this=_possibleConstructorReturn(this,(Mapbox.__proto__||Object.getPrototypeOf(Mapbox)).call(this,options));return _this.scriptSrc="https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js",_this.styleSrc="https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css",_this.loadSrc(),_this}return _inherits(Mapbox,_Leaflet),_createClass(Mapbox,[{key:"createMap",value:function createMap(){var _this2=this;this.options.key?L.mapbox.accessToken=this.options.key:Mapbox.messages().key(),this.map=L.mapbox.map(this.id).setView([this.options.lat,this.options.lng],this.options.zoom),this.options.studio?this.tiles=L.mapbox.styleLayer(this.options.style||"mapbox://styles/mapbox/emerald-v8").addTo(this.map):this.tiles=L.mapbox.tileLayer(this.options.style||"mapbox.streets").addTo(this.map),this.tiles.on("ready",function(){_this2.ready=!0}),this.canvasOverlay()}}],[{key:"messages",value:function messages(){return{key:function key(){console.warn("Please provide a Mapbox API key. Get one here: https://www.mapbox.com/mapbox.js/api/v3.1.1")}}}}]),Mapbox}(_interopRequireDefault(__webpack_require__(2)).default);exports.default=Mapbox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_TileMap2,_TileMap3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var MapboxGL=function(_TileMap){function MapboxGL(options){_classCallCheck(this,MapboxGL);var _this=_possibleConstructorReturn(this,(MapboxGL.__proto__||Object.getPrototypeOf(MapboxGL)).call(this,options));return _this.scriptSrc="https://api.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.js",_this.styleSrc="https://api.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.css",_this.ready=!1,_this.options.key?_this.loadSrc():MapboxGL.messages().key(),_this}return _inherits(MapboxGL,_TileMap),_createClass(MapboxGL,[{key:"createMap",value:function createMap(){var _this2=this;mapboxgl.accessToken=this.options.key,this.map=new mapboxgl.Map({container:this.id,style:this.options.style||"mapbox://styles/mapbox/satellite-streets-v10",center:[this.options.lng,this.options.lat],zoom:this.options.zoom,minZoom:this.options.minZoom||0,maxZoom:this.options.maxZoom||22,bearing:this.options.bearing||0,pitch:this.options.pitch||0,renderWorldCopies:this.options.renderWorldCopies,maxBounds:this.options.maxBounds||void 0}),this.map.getCanvasContainer().appendChild(this.canvas),this.canvas.style.position="relative",this.options.opacity&&(document.getElementsByClassName("mapboxgl-canvas")[0].style.opacity=this.options.opacity),this.map.on("load",function(){_this2.ready=!0})}},{key:"fromLatLngToPixel",value:function fromLatLngToPixel(latLng){return this.ready?this.map.project(latLng):{x:-100,y:-100}}},{key:"fromPointToLatLng",value:function fromPointToLatLng(){if(this.ready){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.map.unproject(args)}return{lat:-100,lng:-100}}},{key:"getZoom",value:function getZoom(){return this.ready?this.map.getZoom():0}},{key:"onChange",value:function onChange(callback){var _this3=this;this.ready?(callback(),this.map.on("render",callback)):setTimeout(function(){_this3.onChange(callback)},200)}},{key:"removeOnChange",value:function removeOnChange(callback){this.map.off("render",callback)}}],[{key:"messages",value:function messages(){return{key:function key(){console.warn("Please provide a Mapbox-gl API key. Get one here: https://www.mapbox.com/mapbox-gl-js/api/")}}}}]),MapboxGL}(_interopRequireDefault(__webpack_require__(1)).default);exports.default=MapboxGL},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s4=function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},GUID=function GUID(){return""+s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()};exports.default=GUID}])});